<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Open source, server agnositc map viewer">
    <meta name="author" content="BillyZ - SERVIR Global">
    <meta name="theme-color" content="#00acec">
    <link rel="shortcut icon" href="/icons/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/icons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>SERVIR Map Viewer</title>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700' rel='stylesheet' type='text/css'>
    <link href="css/vicviewerstyles.css" rel="stylesheet" />
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://js.arcgis.com/3.24/dijit/themes/claro/claro.css">
    <link href="css/esri.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://js.arcgis.com/3.24/esri/css/esri.css">
    <link href="css/responsivebase.css" rel="stylesheet">
    <link rel="stylesheet" href="css/jquery-ui.css">
    <link href="css/Popup.css" rel="stylesheet">
    <link href="css/sliderstyle2.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-treeview.css" rel="stylesheet" />
    <link href="css/mapviewer.css" rel="stylesheet" />
    <link href="css/vis.css" rel="stylesheet" />
    <link href="css/daterangepicker.css" rel="stylesheet" />

    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase-firestore.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-3.0.0.min.js"></script>
    <script src="js/jquery.xml2json.js"></script>
    <script src="js/vis.js"></script>
    <script src="js/mobiscroll.min.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/moment-range.js"></script>
    <script src="js/daterangepicker.js"></script>
    <script src="https://unpkg.com/@esri/arcgis-to-geojson-utils"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script>

        var pathToExtras = '';
        pathToExtras = window.location.pathname.lastIndexOf('/') == 0 ? window.location.origin : window.location.origin + window.location.pathname.substr(0, window.location.pathname.lastIndexOf('/'));

        // helpful for understanding dojoConfig.packages vs. dojoConfig.paths:
        // http://www.sitepen.com/blog/2013/06/20/dojo-faq-what-is-the-difference-packages-vs-paths-vs-aliases/
        var dojoConfig = {
            isDebug: true,
            paths: {
                extras: pathToExtras + "/extras"
            }
        };

    </script>
    <script src="js/jquery-ui.js"></script>

    <script defer src="//js.arcgis.com/3.24/" type="text/javascript"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-treeview.js"></script>
    <script defer src="js/mapviewer.js"></script>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/maps/modules/map.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/workingscripts.js"></script>
    <script src="js/climateservscripts.js"></script>
    <script>
       
    </script>



</head>
<body>
    <div style="width: 100%; height: 100vh; margin: 0;">
        <div class="sticky">
            <div class="example3 " id="nav-wrapper">
                <nav class="navbar navbar-inverse navbar-static-top">
                    <div class="container">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar3">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <a class="navbar-brand" href="https://servirglobal.net">
                                <img src="images/logo.png" alt="SERVIR Global">
                            </a>
                        </div>
                        <div id="navbar3" class="navbar-collapse collapse no-transition">
                            <ul class="nav navbar-nav navbar-right">
                                <li><a href="#" id="alayers-panel" onclick="panelToggler('layers-panel', this, 'Data Layers', true);">Data Layers</a></li>
                                <li><a href="#" id="amaps-panel" onclick="panelToggler('maps-panel', this, 'Base Maps', true);">Base Maps</a></li>
                                <li><a href="#" id="adownload-panel" onclick="panelToggler('download-panel', this, 'Data Tools', true);">Data Tools</a></li>
                                <li><a href="#" id="ainfo-panel" onclick="panelToggler('info-panel', this, 'Information', true)">Info </a></li>
                            </ul>
                        </div>
                        <!--/.nav-collapse -->
                    </div>
                    <!--/.container-fluid -->
                </nav>
            </div>

            <div id="right-panel" class="right-panels">
                <span id="panelTitle">Layers will be here</span>
                <img src="css/images/close.png" class="panel-close" alt="Close panel" title="Close panel" onclick="toggleParam('close', null); setPanelTitle('');" />
                <!-- Buttons (icons) -->
                <!-- Details Panel -->
                <div id="layers-panel" class="panel-wrapper">


                    <input type="search" placeholder="filter data.." name="search" class="form-control searchbox-input" required="" />
                    <button onclick="closeAll()" class="btn btn-link">Close all Categories</button> | <button onclick="expandAll()" class="btn btn-link">Expand all Categories</button>
                    <div id="accordion">

                    </div>
                </div>
                <!-- Analysis Panel -->
                <div id="maps-panel" class="panel-wrapper">
                    <img class="esriBasemapGalleryThumbnail selected" src="https://www.arcgis.com/sharing/rest/content/items/6e03e8c26aad4b9c92a87c1063ddb0e3/info/thumbnail/topo_map_2.jpg" title="Topographic" alt="Topographic" onclick="setBaseMap('topo', this)">


                    <img class="esriBasemapGalleryThumbnail" src="https://www.arcgis.com/sharing/rest/content/items/d8855ee4d3d74413babfb0f41203b168/info/thumbnail/world_street_map.jpg" title="Streets" alt="Streets" onclick="setBaseMap('streets', this)">

                    <img class="esriBasemapGalleryThumbnail" src="https://www.arcgis.com/sharing/rest/content/items/86de95d4e0244cba80f0fa2c9403a7b2/info/thumbnail/tempimagery.jpg" title="Imagery" alt="Imagery" onclick="setBaseMap('satellite', this)">
                    <img class="esriBasemapGalleryThumbnail" src="https://www.arcgis.com/sharing/rest/content/items/413fd05bbd7342f5991d5ec96f4f8b18/info/thumbnail/imagery_labels.jpg" title="Imagery with Labels" alt="Imagery with Labels" onclick="setBaseMap('hybrid', this)">
                    <img class="esriBasemapGalleryThumbnail" src="https://www.arcgis.com/sharing/rest/content/items/8b3b470883a744aeb60e5fff0a319ce7/info/thumbnail/light_gray_canvas.jpg" title="Light Gray Canvas" alt="Light Gray Canvas" onclick="setBaseMap('gray', this)">
                    <img class="esriBasemapGalleryThumbnail" src="https://www.arcgis.com/sharing/rest/content/items/509e2d6b034246d692a461724ae2d62c/info/thumbnail/natgeo.jpg" title="National Geographic" alt="National Geographic" onclick="setBaseMap('national-geographic', this)">
                    <img class="esriBasemapGalleryThumbnail" src="https://www.arcgis.com/sharing/rest/content/items/48b8cec7ebf04b5fbdcaf70d09daff21/info/thumbnail/tempoceans.jpg" title="Oceans" alt="Oceans" onclick="setBaseMap('oceans', this)">
                    <img class="esriBasemapGalleryThumbnail" src="https://www.arcgis.com/sharing/rest/content/items/5d2bfa736f8448b3a1708e1f6be23eed/info/thumbnail/temposm.jpg" title="OpenStreetMap" alt="OpenStreetMap" onclick="setBaseMap('osm', this)">


                </div>
                <!--Clip, Zip, & Ship Panel-->
                <div id="download-panel" class="panel-wrapper">
                    <div class="card col-sm-12 row-eq-height">
                        <div class="card-body cooltree">
                            <label class="cblabel"><input id="getInfoToggle" class="bzcheckbox" type="checkbox" value="" onclick="getInfoToggle(this.checked);">Enable Get Info (top layer)</label>
                        </div>
                    </div>
                    <div id="toolaccordian">
                        <div class="accordiancard card">
                            <div class="card-header" id="headingOne">
                                <h5 class="mb-0">
                                    <button class="btn btn-link" data-toggle="collapse" data-target="#ClimateSERVbody" aria-expanded="true" aria-controls="ClimateSERVbody">
                                        <span class="glyphicon glyphicon-minus"></span> ClimateSERV
                                    </button>
                                </h5>
                            </div>
                        </div>
                    </div>
                    <div class="row  in" id="ClimateSERVbody" aria-labelledby="headingOne" style="height: auto;">
                        <div class="card col-sm-12 row-eq-height">
                            <div class="card-body cooltree" style="text-align: center;">
                                <p>
                                    <div class="styled-select slate">
                                        <select id="climateSERVSelectAOI">
                                            <option value="none">--Select AOI--</option>
                                            <option value="draw">Draw custom polygon</option>
                                            <option value="choose">Choose feature on map</option>
                                            <option value="load">Upload GeoJson file</option>
                                        </select>
                                    </div>
                                    <br id="featureTypeRequest_spacer" style="display:none;" />
                                    <div id="featureTypeRequest" style="display:none;" class="styled-select slate">
                                        <select class="ui dropdown servir_helper_stretchDropdown_70pct" name="selectFeatureTypeRequest" id="selectFeatureTypeRequest" onchange="updateSelectFeatureTypeRequest(this.value)">
                                            <option value="country">Country</option>
                                            <option value="admin_1_earth">Admin #1</option>
                                            <option value="admin_2_af">Admin #2</option>
                                        </select>
                                    </div>
                                </p>
                                <p>
                                    <div class="styled-select slate">
                                        <select id="climateSERVSelectType">
                                            <option value="none">--Select request type--</option>
                                            <option value="data">Datasets</option>
                                            <option value="rainfall">Monthly Rainfall Analysis</option>
                                        </select>
                                    </div>
                                </p>
                                <div id="dataPanel" style="display:none">
                                    <div class="styled-select slate">
                                        <select style="color: black;" name="typemenu" id="typemenu" onchange="select_dataType_Changed(this.value)">
                                            <option value="xx">--Data Source--</option>
                                            <option value="0">CHIRPS Rainfall</option>
                                            <option value="1">West Africa eMODIS NDVI</option>
                                            <option value="2">East Africa eMODIS NDVI</option>
                                            <option value="5">Southern Africa eMODIS NDVI</option>
                                            <option value="28">Central Asia eMODIS NDVI</option>
                                            <option value="ClimateModel">Seasonal_Forecast</option>
                                            <option value="26">IMERG 1 Day</option>
                                            <option value="29">ESI</option>
                                            <option value="33">Evaporative Stress Index (ESI-12WEEK)</option>
                                            <option value="31">CHIRPS-GEFS Anamolies</option>
                                            <option value="32">CHIRPS-GEFS Precip</option>

                                        </select>
                                    </div>
                                    <div id="climateModelForm" style="display:none">
                                        <label for="ensemblemenu" title="Select a model ensemble">Select a model ensemble:</label>
                                        <div class="styled-select slate">
                                            <select name="ensemblemenu" id="ensemblemenu">
                                                <option value="6">ens01</option>
                                                <option value="8">ens02</option>
                                                <option value="10">ens03</option>
                                                <option value="12">ens04</option>
                                                <option value="14">ens05</option>
                                                <option value="16">ens06</option>
                                                <option value="18">ens07</option>
                                                <option value="20">ens08</option>
                                                <option value="22">ens09</option>
                                                <option value="24">ens10</option>
                                            </select>
                                        </div>
                                        <label for="variablemenu" title="Select a variable">Select a variable:</label>
                                        <div class="styled-select slate">
                                            <select name="variablemenu" id="variablemenu">
                                                <option value="0">Temperature</option>
                                                <option value="1">Precipitation</option>
                                            </select>
                                        </div>
                                        <p>
                                            <label for="currentspan" title="Current run">Current Model Run: &nbsp;</label><span id="currentspan">2018/07</span><br />
                                            <label for="calcmenu" title="Calculations">Calculations:</label>
                                        </p>
                                        <div class="styled-select slate">
                                            <select name="calcmenu" id="calcmenu">
                                                <option value="0">Max</option>
                                                <option value="1">Min</option>
                                                <option value="5" selected="selected">Average</option>
                                                <option value="6">Download Raw Data</option>
                                            </select>
                                        </div>
                                        <p>
                                            <label for="randomInfopan" title="Select forecast range">Select forecast range: &nbsp;</label><span id="randomInfopan">Max Days: 180</span><br />

                                        </p>
                                        <label for="forecastRangeFrommenu" title="Forecase range from">From:</label>
                                        <div class="styled-select slate">
                                            <select name="forecastRangeFrommenu" id="forecastRangeFrommenu"></select>
                                        </div>
                                        <label for="forecastRangeTomenu" title="Forecase range to">To:</label>
                                        <div class="styled-select slate">
                                            <select name="forecastRangeTomenu" id="forecastRangeTomenu"></select>
                                        </div>
                                    </div>
                                    <div id="defaultDataForm" style="display:none">
                                        <label for="operationmenu" title="Calculations">Calculations:</label>
                                        <div class="styled-select slate">
                                            <select name="operationmenu" id="operationmenu">
                                                <option value="0">Max</option>
                                                <option value="1">Min</option>
                                                <option value="5" selected="selected">Average</option>
                                                <option value="6">Download Raw Data</option>
                                            </select>
                                        </div>
                                        <label for="datepickerbegin" title="Start Date">Start Date:</label>
                                        <input type="text" id="datepickerbegin" placeholder="Start Date">
                                        <label for="datepickerend" title="Start Date">End Date:</label>
                                        <input type="text" id="datepickerend" placeholder="End Date">
                                    </div>
                                </div>
                                <div id="rainfallPanel" style="display:none">
                                    <p style="text-align:center">
                                        No other options are necessary. Choose 'Submit Job' below to proceed.<br />
                                        Monthly Rainfall Analysis is derived from a combination of CHIRPS historical data and current NMME Seasonal Forecast data.

                                    </p>
                                </div>
                                <p style="text-align:center">
                                    <button onclick="cleardrawnassets()" style="margin-top: 20px; width:100px;"><span>Redraw</span></button>  <button onclick="submitJob()" style="width:100px;"><span>Submit Job</span></button>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="mobilebuffer"></div>
                </div>
                <div id="info-panel" class="panel-wrapper">

                    This SERVIR Map Viewer.  It is a light weight, easy to install application for viewing WSM layers.  This application is powered by html, jQuery, bootstrap, javascript and Firebase using Cloud Firestore.  To install your own instance of this application you will simply have to setup a Cloud Firestore and enter the settings in the code.   For more information on styling and changing the logo please check out the read me file in our <a href="https://github.com/SERVIR/MapViewer" target="_blank">github repo</a>.  <br /><br />
                    <p style="position: absolute; bottom: 0;">
                        For privacy &amp; Terms of Use Statement please visit <a href="https://www.servirglobal.net/Global/PrivacyTermsofUse.aspx" target="_blank">the SERVIR Privacy and Terms of Use page</a><br>
                    </p>
                    <br class="clearfix" />
                    <br class="clearfix" />
                    <table style="position: absolute;bottom: 100px;width: 95%;text-align:center;margin-top: 5px;">
                        <tr>
                            <td>
                                <table cellspacing="0" cellpadding="0" align="center" style="margin-left: auto; margin-right: auto; text-align: center; width: 0px;   border-collapse: separate;   background: url(https://www.servirglobal.net/Portals/_default/Skins/Servir/images/footer-logos-bg.png) top repeat; padding: 9px 9px 5px 9px;">
                                    <colgroup><col></colgroup>
                                    <tbody>
                                        <tr>
                                            <td style="text-align: left; vertical-align: top;">
                                                <table cellspacing="0" cellpadding="0" align="left" style="text-align: left; width: 100%;">
                                                    <colgroup><col><col><col></colgroup>
                                                    <tbody>
                                                        <tr>
                                                            <td><a href="http://appliedsciences.nasa.gov/" target="_blank" title="NASA Applied Sciences Program. This will open in a new window."><img width="40" height="33" src="images/footer-nasa.png" style="border-width: 0px; border-style: solid;" alt="NASA Applied Sciences Program"></a></td>
                                                            <td style="text-align: center;"><a title="USAID From The American People. This will open in a new window." target="_blank" href="http://www.usaid.gov/"><img width="112" height="33" alt="USAID From The American People" src="https://www.servirglobal.net/portals/0/Images/footer-usaid.png"></a></td>
                                                            <td><a title="Group on Earth Observations. This will open in a new window." target="_blank" href="http://www.earthobservations.org/"><img width="61" height="33" alt="Group on Earth Observations" src="https://www.servirglobal.net/portals/0/Images/footer-geo.png"></a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: left; vertical-align: top;">
                                                <table cellspacing="0" cellpadding="0" align="left" style="text-align: left; width: 0px;">
                                                    <colgroup><col><col><col></colgroup>
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                <a href="http://www.adpc.net/" target="_blank" title="Asian Disaster Preparedness Center. This will open in a new window."><img width="55" alt=" Asian Disaster Preparedness Center" src="https://www.servirglobal.net/portals/0/Images/adpc_logo.png"></a>
                                                            </td>
                                                            <td><a href="http://www.agrhymet.ne/eng" target="_blank" title="CILSS Comité permanent Inter-Etats de Lutte contre la Sécheresse dans le Sahel Permanent Interstates Committee for Drought Control in the Sahel. This will open in a new window."><img width="38" height="37" style="margin-left: 8px;" alt="CILSS Comité permanent Inter-Etats de Lutte contre la Sécheresse dans le Sahel Permanent Interstates Committee for Drought Control in the Sahel" src="https://servirglobal.net/Portals/_default/Skins/Servir2015/img/cilss.png"></a></td>
                                                            <td><a href="http://www.rcmrd.org/" target="_blank" title="Regional Centre for Mapping of Resources for Development. This will open in a new window."><img width="70" height="44" alt="Regional Centre for Mapping of Resources for Development" src="https://www.servirglobal.net/portals/0/Images/footer-rcmrd.png"></a></td>
                                                            <td><a title="International Centre for Integrated Mountain Development. This will open in a new window." target="_blank" href="http://www.icimod.org/"><img width="99" height="44" alt="International Centre for Integrated Mountain Development" src="https://www.servirglobal.net/portals/0/Images/footer-icimod.png"></a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </table>

                </div>

            </div>
            <div class="esriPopup esriPopupVisible" style="z-index: 8675309;"></div>
                <div id="map" class="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">
                    <div id="ServirLogoHolder" style="pointer-events: none;    position: absolute;    bottom: 12px;    z-index: 100;    width: 100%; display:none;">
                        <div style="margin-left: auto; margin-right: auto; width: 75px; text-align: center;
                    width: 50%; max-width: 450px; white-space: nowrap;">
                            <img src="images/activity_legend.png" alt="Activity Legend" style="max-width: 70%; /* width: 18%; */ min-width: 30px; pointer-events: auto;" title="Activity Legend">
                        </div>
                    </div>
                    <div id="BasemapToggle">
                    </div>
                    <div id="navtoolHolder">
                        <div id="navtools">

                        </div>
                    </div>
                    <div id="timeindicator" style="display:none; position:absolute; top:0px; left:0px;"><span id="txtSelectedTime"></span></div>
                    <section id="timeline" style="display:none;">
                        <div id="myTable">
                            <div id="timeline-header">
                                <div id="reportrange" class="pull-right">
                                    <select id="activeTimelineLayer"></select>
                                </div>
                                <div style="width:100%; text-align:center;">
                                    <button id="btnAnimate" onclick="gotoFirst()" style="background:url(css/images/previous.png) no-repeat; background-size: cover; margin: 2px 4px 0px 4px; width:30px; background-color: #4dc5f2; border: 1px solid #4dc5f2;">&nbsp;</button>
                                    <button id="btnAnimate" onclick="animateRange()" style="background:url(css/images/play.png) no-repeat; background-size: cover; margin: 2px 4px 0px 4px; width:30px; background-color: #4dc5f2; border: 1px solid #4dc5f2;">&nbsp;</button>
                                    <button id="btnStop" onclick="stopAnimation()" style="background:url(css/images/pause.png) no-repeat; background-size: cover; margin: 2px 4px 0px 4px; width:30px; background-color: #4dc5f2; border: 1px solid #4dc5f2;">&nbsp;</button>
                                    <button id="btnAnimate" onclick="gotoLast()" style="background:url(css/images/next.png) no-repeat; background-size: cover; margin: 2px 4px 0px 4px; width:30px; background-color: #4dc5f2; border: 1px solid #4dc5f2;">&nbsp;</button>
                                </div>
                            </div>

                            <!--/timeline-header-->

                            <div id="visualization" style="display: table-cell; width:100%; "></div>

                        </div>

                    </section>

                </div>
            </div>
        </div>
    <span id="ismobile" class="ismobile"></span>
    <div id="loadGeoJsonDialog" style="clear:both; display:none;">
        <div class="stitched_drop" style="width:92%; height:100px" id="drop_zone"><center><img style="vertical-align: middle;" src="images/browser-upload.png">   <font size="3">Drop GeoJSON file here</font></center></div>
        or <input type="file" id="file" name="file" enctype="multipart/form-data" />
    </div>
    <div id="page-cover">
        <div id="myProgress">
            <div id="myBar"></div>
        </div>
    </div>
    <div class='toasty' style='display:none'>File uploaded</div>
</body>
</html>
